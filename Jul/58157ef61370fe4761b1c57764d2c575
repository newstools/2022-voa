Butterflies and waxbills flit through the Enchanted Valley just outside Rio de Janeiro's Tijuca Forest National Park. There are fruit trees, a nearby waterfall and a commanding view out over the Atlantic Ocean. But for decades something was spoiling the idyll: the stench of raw sewage.

Electricity arrived in the late 20th century to the low-income Enchanted Valley community — which drew its name from a nearby residential project — but the utility never connected it to the city's sewage network. Waste was contaminating the local environment and putting residents' health at risk.

So the community set out to solve the problem on its own by building a biodigester and artificial wetland to process all sewage generated by its 40 families.

Starting full operations in June, it is the first independently built biosystem for an entire Brazilian favela, according to Theresa Williamson, executive director at Catalytic Communities, a nonprofit that supports the underserviced neighborhoods. And it could serve as an example for rural hamlets across Brazil. According to official data, 45% of Brazilians' sewage isn't collected.

The Enchanted Valley project was years in the making. The president of the residents' association, Otávio Barros, brought a group of tourists to a downhill waterfall in 2007. When they wanted to bathe in its waters, he told them they couldn't; all the community's sewage flowed through that cascade. The seed of an idea was planted, though, and he started drumming up support.

"It was harder back then to make people aware, show that everyone would benefit," he told The Associated Press as he walked through the community. He found allies among researchers of Pontifical Catholic University of Rio de Janeiro, where he had been working as an administrative assistant. They secured money from Rio state's foundation for the support of research to complete a first phase in 2015, and more recently German and Brazilian nonprofits Viva con Agua and Instituto Clima e Sociedade to connect every home, with additional funding from Catalytic Communities.

Barros labored alongside five other residents for months, including some three weeks of breaking through rocks to create a pathway for new pipes. They lead to the domed biodigester, where sewage is ingested by anaerobic microorganisms. Remaining fluids then proceed to snake beneath the constructed wetland, getting cleansed by fertilizing the plants above. The full price of the system was about $42,300 (220,000 reais). That's one-quarter what it would have cost to run pipes through the forest down to the existing sewage network at sea level, according to Leonardo Adler, founding partner of Taboa Engenharia, which oversaw the technical side of works.

The federal government has a plan to improve sewage treatment throughout Brazil, which it is pursuing through private concessions of large urban areas. But that approach doesn't help small, isolated communities like Enchanted Valley, where the smell of sewage is now gone and its nearby waterfall is clean for bathing.

"I'm very happy because it was a very arduous stage to manage to bring in partners, involve the community to capture the sewage and return it to the environment clean," Barros said. "It's part of a dream becoming reality. We have others for the Valley."