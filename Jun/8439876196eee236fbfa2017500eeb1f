NATO ally Turkey lifted its veto over Finland and Sweden's bid to join the Western alliance on Tuesday after the three nations agreed to protect each other's security, ending a weeks-long drama that tested allied unity against Russia's invasion of Ukraine.

The breakthrough came after four hours of talks just before a NATO summit began in Madrid, averting an embarrassing impasse at the gathering of 30 leaders that aims to show resolve against Russia, now seen by the U.S.-led alliance as a direct security threat rather than a possible adversary.

It means Helsinki and Stockholm can proceed with their application to join the nuclear-armed alliance, cementing what is set to be the biggest shift in European security in decades, as the two, long neutral Nordic countries seek NATO protection.

"Our foreign ministers signed a trilateral memorandum which confirms that Turkey will ... support the invitation of Finland and Sweden to become members of NATO," Finnish President Sauli Niinisto said in a statement.

"The concrete steps of our accession to NATO will be agreed by the NATO allies during the next two days, but that decision is now imminent," Niinisto said.

NATO Secretary-General Jens Stoltenberg and Turkey's presidency confirmed the accord in separate statements, after talks between the NATO chief, Turkish President Tayyip Erdogan, Swedish Prime Minister Magdalena Andersson and Niinisto.

British Prime Minister Boris Johnson tweeted, "Fantastic news as we kick off the NATO summit. Sweden and Finland's membership will make our brilliant alliance stronger and safer."

Stoltenberg said NATO's 30 leaders would now invite Finland, which shares a 1,300 km border with Russia, and Sweden to join NATO, and that they would become official "invitees."

"The door is open. The joining of Finland and Sweden into NATO will take place," Stoltenberg said.

However, even with a formal invitation granted, NATO's 30 allied parliaments must ratify the decision by leaders, a process that could take up to a year.

Terms of the deal

Turkey's main demands, which came as a surprise to NATO allies in May, were for the Nordic countries to stop supporting Kurdish militant groups present on their territory and to lift their bans on some sales of arms to Turkey.

Stoltenberg said the terms of the deal involved Sweden intensifying work on Turkish extradition requests of suspected militants and amending Swedish and Finnish law to toughen their approach to them.

Stoltenberg said Sweden and Finland would lift their restrictions on selling weapons to Turkey.

Turkey has raised serious concerns that Sweden has been harboring what it says are militants from the banned Kurdistan Workers Party (PKK), which took up arms against the Turkish state in 1984. Stockholm denies the accusation.

The Turkish presidency statement said the four-way agreement reached on Tuesday meant "full cooperation with Turkey in the fight against the PKK and its affiliates."

It also said Sweden and Finland were "demonstrating solidarity with Turkey in the fight against terrorism in all its forms and manifestations."

U.S. President Joe Biden, who arrived in Madrid before a dinner with his fellow NATO leaders, did not directly address the issue in his public comments with Spanish Prime Minister Pedro Sanchez and King Felipe of Spain.

But he stressed the unity of the alliance, saying NATO was "as galvanized as I believe it's ever been."

Biden is to have a meeting with Erdogan during the NATO summit. Erdogan said before leaving for Madrid that he would push Biden on an F-16 fighter jet purchase.

He said he would discuss with Biden the issue of Ankara's procurement of S-400 air defense systems from Russia which led to U.S. sanctions as well as modernization kits from Washington and other bilateral issues.

The resolution of the deadlock marked a triumph for intense diplomacy as NATO allies try to seal the Nordic accession in record time as a way of solidifying their response to Russia â€” particularly in the Baltic Sea, where Finnish and Swedish membership would give the alliance military superiority.

In the wider Nordic region, Norway, Denmark and the three Baltic states are already NATO members. Russia's war in Ukraine, which Moscow calls a "special military operation," helped overturn decades of Swedish opposition to joining NATO.