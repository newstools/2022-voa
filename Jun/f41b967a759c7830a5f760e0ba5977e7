Democratic and Republican senators were at odds Thursday over how to keep firearms from dangerous people as bargainers struggled to finalize details of a gun violence compromise in time for their self-imposed deadline of holding votes in Congress next week. Lawmakers said they remained divided over how to define abusive dating partners so they could be legally barred from purchasing firearms. Disagreements were also unresolved over proposals to send money to states that have "red flag" laws that let authorities temporarily confiscate guns from people deemed dangerous by courts, and to other states for their own violence prevention programs. Sen. John Cornyn of Texas, a lead GOP bargainer, seemed visibly unhappy as he left Thursday's closed-door session after nearly two hours, saying he was flying home. The election-year negotiations were prompted by last month's mass shootings at a grocery store in Buffalo, New York, and an elementary school in Uvalde, Texas, at which a total of 31 people were slain. "This is the hardest part because at some point, you just got to make a decision. And when people don't want to make a decision, you can't accomplish the result. And that's kind of where we are right now," Cornyn said. "I'm not frustrated, I'm done," he added, though he said he was open to continued discussions. Lawmakers have said an agreement must be completed and written into legislative language by this week's end if Congress is to vote on the legislation by next week, after which it begins a July 4 recess. Leaders want votes by then because Washington has a long record of talking about reacting to mass shootings, only to see lawmakers' and voters' interest fade quickly over time. Other bargainers seemed more optimistic, saying much of the overall package has been agreed to and aides were drafting legislative language. "A deal like this is difficult," Sen. Chris Murphy of Connecticut, a lead Democratic negotiator, said when the meeting ended later. "It comes with a lot of emotions, it comes with political risk to both sides. But we're close enough that we should be able to get there." The measure would impose just small-scale curbs on firearms. It lacks proposals by President Joe Biden and Democrats to prohibit assault-style weapons and high-capacity ammunition magazines like the ones used in Buffalo and Uvalde, or to raise the legal age for purchasing assault rifles from 18 to 21. Even so, it would be Congress' most robust move against gun violence since 1993. A ban lawmakers enacted that year on assault weapons took effect in 1994 and expired after a decade. Scores of high-profile mass shootings since have yielded little from Washington but partisan deadlock, chiefly due to Republicans blocking virtually any new restrictions. Twenty senators, 10 from each party, agreed to the outlines of a compromise measure last weekend. Top bargainers — Murphy, Cornyn and Sens. Kyrsten Sinema, D-Ariz., and Thom Tillis, R-N.C. — have labored ever since to translate it into details. Their framework would include also access to the juvenile records of gun buyers age 18-20. Both shooters in Buffalo and Uvalde were 18, and both used AR-15 style automatic rifles, which can load high-capacity magazines. The plan would also include added spending for mental health and school safety programs, tougher penalties for gun trafficking and requirements that more gun dealers obtain federal firearms licenses. The agreement has been endorsed by Biden, Senate Majority Leader Chuck Schumer, D-N.Y., Senate Minority Leader Mitch McConnell, R-Ky., and House Speaker Nancy Pelosi, D-Calif. 